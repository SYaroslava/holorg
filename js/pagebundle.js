(()=>{const e=document.querySelector(".burger"),t=document.querySelector(".header"),s=document.querySelector("main");e.addEventListener("click",(e=>{t.classList.toggle("_open"),s.classList.toggle("_block")}));const r=document.querySelector(".header .header__contacts"),i=document.querySelector(".header .header__bottom"),l=document.querySelector(".header .header__top");let n=!1;const o=new class{constructor(e,t,s,r,i){this.wrapper=e,this.slider=document.querySelector(t),this.sliderItems=document.querySelectorAll(s),this.nextBtn=document.querySelector(r),this.prevBtn=document.querySelector(i),this.count=this.sliderItems.length,this.nextSlide=this.nextSlide.bind(this),this.prevSlide=this.prevSlide.bind(this),this.addListenersBtn()}setItems(e){this.sliderItems=""==e?document.querySelectorAll(`${this.wrapper} .slider__item`):document.querySelectorAll(`${this.wrapper} .slider__item[data-filter="${e}"]`);const t=this.sliderItems.length;t>0&&(3==t?(this.translateSlider(1),this.addSlideClass(1),this.currentNumber=1):t<3?(this.translateSlider(0),this.addSlideClass(0),this.currentNumber=0):(this.translateSlider(2),this.addSlideClass(2),this.currentNumber=2)),this.count=this.sliderItems.length}setValue(e=20,t=2){this.slideTranslateValue=e,this.translateSlider(t),this.addSlideClass(t),this.currentNumber=t,this.startNumber=t}addListenersBtn(){this.nextBtn.addEventListener("click",this.nextSlide),this.prevBtn.addEventListener("click",this.prevSlide)}nextSlide(){if(this.currentNumber<this.count-1){const e=++this.currentNumber;this.translateSlider(e),this.addSlideClass(e)}}prevSlide(){if(this.currentNumber>0){const e=--this.currentNumber;this.translateSlider(e),this.addSlideClass(e)}}removeCliserClass(e){const t=document.querySelector(`${this.wrapper} .slider__item._active`);null!=t&&t.classList.remove("_active");const s=document.querySelector(`${this.wrapper} .slider__item._prev-item`);null!=s&&s.classList.remove("_prev-item");const r=document.querySelector(`${this.wrapper} .slider__item._next-item`);null!=r&&r.classList.remove("_next-item");const i=document.querySelector(`${this.wrapper} .slider__item._prev-second-item`);null!=i&&i.classList.remove("_prev-second-item");const l=document.querySelector(`${this.wrapper} .slider__item._next-second-item`);null!=l&&l.classList.remove("_next-second-item")}addSlideClass(e){this.removeCliserClass(e),this.sliderItems[e].classList.add("_active");const t=this.sliderItems[e+1];null!=t&&t.classList.add("_next-item");const s=this.sliderItems[e+2];null!=s&&s.classList.add("_next-second-item");const r=this.sliderItems[e-2];null!=r&&r.classList.add("_prev-second-item");const i=this.sliderItems[e-1];null!=i&&i.classList.add("_prev-item")}translateSlider(e){let t;t=-this.slideTranslateValue*(e-this.startNumber),this.slider.style.transform=`translate(${t}%,0px)`}touchStart(e){this.startPosition=e}moveSlider(e){if(this.startPosition>e){if(this.startPosition-e>50)return this.nextSlide(),1}else if(e-this.startPosition>50)return this.prevSlide(),1}}(".gallery",".gallery .slider__body",".gallery .slider__item",".gallery .arrow-right",".gallery .arrow-left"),d=document.querySelector(".gallery .slider");d.ontouchstart=e=>{o.touchStart(e.touches[0].clientX),d.addEventListener("touchmove",c)};const c=e=>{e.preventDefault();const t=e.touches[0].clientX;o.moveSlider(t)&&d.removeEventListener("touchmove",c)},a=document.querySelectorAll(".filters__item");for(let e=0;e<a.length;e++)a[e].addEventListener("click",u);function u(e){const t=e.target,s=t.dataset.filter;document.querySelector(".filters__item._active").classList.remove("_active"),t.classList.add("_active"),o.setItems(s),function(e){if(""==e)for(let e=0;e<m.length;e++)m[e].classList.remove("_hidden");else for(let t=0;t<m.length;t++){const s=m[t];s.dataset.filter==e?s.classList.remove("_hidden"):s.classList.add("_hidden")}}(s)}const m=document.querySelectorAll(".gallery .slider__item");for(let e=0;e<m.length;e++)m[e].addEventListener("click",S);const h=document.querySelector(".modal__image"),_=document.querySelector(".modal-slide");function S(e){const t=e.target.innerHTML;h.innerHTML=t,_.classList.add("_open")}const v=document.querySelectorAll(".modal-close");for(let e=0;e<v.length;e++){const t=v[e];t.addEventListener("click",(e=>{t.closest(".modal").classList.remove("_open")}))}const p=document.querySelectorAll(".bonus__title");function y(){!function(){for(let e=0;e<p.length;e++){const t=p[e],s=t.closest(".bonus").querySelector(".bonus__description").clientHeight;t.style.height=`${s}px`}}(),window.matchMedia("(max-width: 768px)").matches?(o.setValue(33.33,1),n||(n=!0,i.insertAdjacentElement("beforeend",r))):(o.setValue(),n&&(n=!1,l.insertAdjacentElement("beforeend",r)))}window.addEventListener("resize",y),y(),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".form");function t(e){e.classList.add("_error")}function s(e){e.classList.remove("_error")}null!=e&&e.addEventListener("submit",(async function(r){r.preventDefault(),function(){let e=0;const r=document.querySelector(".input-email");s(r),!/^[\w]{1}[\w-\.]*@[\w-]+\.[a-z]{2,10}$/i.test(r.value)&&(t(r),e++);const i=document.querySelector(".input-phone");return s(i),function(e){return!/^\d[\d\(\)\ -]{4,16}\d$/.test(e.value)}(i)&&(t(i),e++),e}()||function(e){const t=new XMLHttpRequest,s=new FormData(e);t.open("POST","../form.php"),t.send(s),t.onloadend=()=>{t.status,document.querySelector(".form-sended-modal").classList.add("_open"),e.reset()}}(e)}))}))})();